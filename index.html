<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>TIMP Studio Premium</title>
<meta name="description" content="TIMP Studio Premium ‚Äî Produ√ß√£o audiovisual com presen√ßa, credibilidade e atendimento direto em todo o Brasil." />

<style>
/* =========================
   BASE / RESET
========================= */
:root{
  --bg:#0b0b0b;
  --bg2:#060606;
  --text:#f5f5f5;
  --muted:#bdbdbd;
  --line:rgba(255,255,255,.10);
  --glass:rgba(0,0,0,.65);
  --card:rgba(255,255,255,.06);
  --border:rgba(255,255,255,.12);

  --radius:24px;
  --shadow: 0 25px 60px rgba(0,0,0,.65);
}

*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{
  font-family: Arial, Helvetica, sans-serif;
  background: var(--bg);
  color: var(--text);
  overflow-x:hidden;
}

/* melhorar ‚Äúpulo‚Äù ao clicar nos atalhos com header fixo */
#inicio, #sobre, #servicos, #pacotes, #portfolio, #depoimentos, #contato{
  scroll-margin-top: 96px;
}

/* =========================
   HEADER
========================= */
header{
  position: fixed;
  top:0; left:0;
  width:100%;
  z-index:100;
  background: var(--glass);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid rgba(255,255,255,.06);
}

.header-container{
  max-width: 1400px;
  margin: 0 auto;
  padding: 14px 18px;
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap:14px;
}

.brand{
  display:flex;
  align-items:center;
  gap:12px;
  min-width:0;
}
.brand img{
  width:34px;
  height:34px;
  object-fit:contain;
  display:block;
  opacity:.95;
}
.brand .title{
  font-weight: 800;
  letter-spacing: .2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 44vw;
}
.brand .title small{
  display:block;
  font-weight: 500;
  color: var(--muted);
  font-size: 12px;
  margin-top: 2px;
}

nav.nav-desktop{
  display:flex;
  align-items:center;
  gap:26px;
}
nav.nav-desktop a{
  color: #cfcfcf;
  text-decoration:none;
  font-size:14px;
  font-weight:600;
  position:relative;
  padding:6px 0;
}
nav.nav-desktop a:hover{color:#fff}
nav.nav-desktop a.active{color:#fff}
nav.nav-desktop a.active::after{
  content:"";
  position:absolute;
  left:0;
  bottom:-6px;
  width:100%;
  height:2px;
  background:#fff;
  border-radius:2px;
}

/* CTA do header */
.header-cta{
  display:flex;
  gap:10px;
  align-items:center;
}
.btn-mini{
  padding:10px 14px;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  color:#fff;
  text-decoration:none;
  font-weight:800;
  font-size:13px;
  transition:.2s;
}
.btn-mini:hover{background: rgba(255,255,255,.12); transform: translateY(-1px);}

/* =========================
   MENU MOBILE (HAMBURGUER)
========================= */
.menu-btn{
  display:none;
  width:44px;
  height:44px;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  cursor:pointer;
  align-items:center;
  justify-content:center;
}
.menu-btn:active{transform:scale(.98)}
.menu-icon{
  width:20px; height:14px;
  position:relative;
}
.menu-icon span{
  position:absolute;
  left:0; right:0;
  height:2px;
  background:#fff;
  border-radius: 2px;
  transition:.2s;
}
.menu-icon span:nth-child(1){top:0}
.menu-icon span:nth-child(2){top:6px; opacity:1}
.menu-icon span:nth-child(3){top:12px}

.mobile-panel{
  display:none;
  background: rgba(0,0,0,.78);
  backdrop-filter: blur(12px);
  border-top:1px solid rgba(255,255,255,.06);
}
.mobile-panel .inner{
  max-width: 1400px;
  margin: 0 auto;
  padding: 10px 14px 16px;
}
.mobile-panel a{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding: 12px 12px;
  border-radius: 14px;
  color:#eaeaea;
  text-decoration:none;
  font-weight: 900;
  letter-spacing:.2px;
}
.mobile-panel a:hover{background: rgba(255,255,255,.07);}
.mobile-panel a.active{
  background: rgba(255,255,255,.10);
  border: 1px solid rgba(255,255,255,.12);
}
.mobile-panel .cta-row{
  margin-top: 10px;
  display:flex;
  gap:10px;
}
.mobile-panel .cta-row a{
  flex:1;
  justify-content:center;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.12);
}
.mobile-panel .cta-row a:hover{
  background: rgba(255,255,255,.12);
}

/* =========================
   HERO
========================= */
.hero{
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding-top: 84px;
  background:
    radial-gradient(circle at top, rgba(255,255,255,0.10), transparent 58%),
    linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
}
.hero img{
  width: min(86vw, 980px);
  height:auto;
  filter:
    drop-shadow(0 25px 60px rgba(0,0,0,.9))
    drop-shadow(0 0 90px rgba(255,255,255,.08));
}

/* =========================
   SE√á√ïES
========================= */
section{
  padding: 110px 18px;
  border-top: 1px solid rgba(255,255,255,.06);
}
.container{
  max-width: 1200px;
  margin: 0 auto;
}
.kicker{
  color:#cfcfcf;
  letter-spacing: .28em;
  font-size: 12px;
  text-transform: uppercase;
  margin-bottom: 10px;
  opacity:.85;
}
h2{
  font-size: 48px;
  margin-bottom: 18px;
}
p{
  color: var(--muted);
  font-size: 18px;
  line-height: 1.7;
  max-width: 900px;
}
p + p{ margin-top: 14px; }

/* cards / grid */
.grid{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 22px;
  margin-top: 34px;
}
.card{
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
  box-shadow: 0 8px 30px rgba(0,0,0,.20);
}

/* =========================
   BOT√ïES
========================= */
.buttons{
  margin-top: 28px;
  display:flex;
  gap:14px;
  flex-wrap: wrap;
}
.btn{
  padding: 14px 22px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.08);
  color:#fff;
  text-decoration:none;
  font-weight: 900;
  transition: .22s;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}
.btn:hover{background: rgba(255,255,255,.16); transform: translateY(-2px);}

.btn-outline{
  background: rgba(255,255,255,.04);
}
.btn-outline:hover{background: rgba(255,255,255,.10);}

/* =========================
   PORTF√ìLIO
========================= */
.portfolio-grid{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 22px;
  margin-top: 34px;
}
.video-card{
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow:hidden;
  box-shadow: var(--shadow);
}
.video-frame{
  position:relative;
  width:100%;
  aspect-ratio: 16/9;
  background:#000;
}
.video-frame iframe{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  border:0;
}
.video-meta{
  padding: 18px 18px 20px;
}
.video-title{
  font-weight: 900;
  font-size: 16px;
  margin-bottom: 6px;
}
.video-sub{
  color: var(--muted);
  font-size: 13px;
  line-height: 1.5;
}
.video-actions{
  margin-top: 14px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.video-actions a{
  flex: 1;
  min-width: 140px;
}

/* CTA fim do portf√≥lio */
.portfolio-cta{
  margin-top: 26px;
  padding: 22px;
  border-radius: var(--radius);
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.05);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
  flex-wrap:wrap;
}
.portfolio-cta strong{
  font-size: 18px;
}
.portfolio-cta span{
  color: var(--muted);
  display:block;
  margin-top:6px;
  font-size:14px;
}

/* =========================
   PACOTES
========================= */
.price-card{
  position:relative;
  display:flex;
  flex-direction:column;
  gap:14px;
}
.price-badge{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:8px 12px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  font-weight:900;
  font-size:12px;
  width: fit-content;
}
.price{
  font-size: 34px;
  font-weight: 900;
  letter-spacing: .3px;
}
.price small{
  display:block;
  font-size: 13px;
  color: var(--muted);
  font-weight: 700;
  margin-top: 6px;
}
.features{
  margin-top: 2px;
  display:flex;
  flex-direction:column;
  gap:8px;
  color:#d7d7d7;
  font-size:14px;
  line-height:1.4;
}
.features span{opacity:.95;}
.select-btn{margin-top:auto; width:100%;}
.featured{
  border: 1px solid rgba(255,255,255,.22);
  background: rgba(255,255,255,.08);
  box-shadow: 0 18px 70px rgba(0,0,0,.50);
}
.featured::before{
  content:"Mais vendido";
  position:absolute;
  top:14px;
  right:14px;
  padding:8px 12px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.16);
  background: rgba(0,0,0,.45);
  font-weight:900;
  font-size:12px;
  color:#fff;
}
.pay-row{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.pay-row a{flex:1; min-width: 160px;}

/* =========================
   FORMUL√ÅRIO (UPGRADE PREMIUM)
========================= */
.small-muted{
  color: var(--muted);
  font-size: 13px;
  line-height:1.5;
}

.form-wrap{
  margin-top: 22px;
  background: rgba(255,255,255,.05);
  border: 1px solid rgba(255,255,255,.10);
  border-radius: var(--radius);
  padding: 22px;
  box-shadow: 0 10px 30px rgba(0,0,0,.28);
}

.form-topbar{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  align-items:flex-start;
  justify-content:space-between;
  padding: 14px 14px;
  border-radius: 18px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.35);
  margin-bottom: 16px;
}
.form-topbar strong{
  display:block;
  font-size: 14px;
  letter-spacing:.2px;
}
.form-topbar span{
  display:block;
  color: var(--muted);
  font-size: 13px;
  margin-top: 6px;
  line-height:1.45;
}

.steps{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
}
.step{
  display:flex;
  align-items:center;
  gap:8px;
  padding: 10px 12px;
  border-radius: 999px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.05);
  font-weight:900;
  font-size: 12px;
  color:#eaeaea;
  opacity:.92;
}
.step .dot{
  width:10px;
  height:10px;
  border-radius:999px;
  background: rgba(255,255,255,.28);
  box-shadow: 0 0 0 4px rgba(255,255,255,.06);
}
.step.done .dot{ background: rgba(255,255,255,.85); }
.step.active{
  background: rgba(255,255,255,.09);
  border-color: rgba(255,255,255,.18);
}
.step.active .dot{ background: rgba(255,255,255,.95); }

.form-section{
  margin-top: 14px;
  padding: 16px 16px;
  border-radius: 18px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.03);
}
.form-section h3{
  font-size: 16px;
  margin-bottom: 6px;
}
.form-section p{
  margin: 0;
  max-width: none;
  font-size: 14px;
  color: var(--muted);
}

.req{
  display:inline-flex;
  align-items:center;
  gap:6px;
  font-weight:900;
}
.req::after{
  content:"Obrigat√≥rio";
  font-size: 11px;
  font-weight: 900;
  padding: 4px 8px;
  border-radius: 999px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.06);
  color:#eaeaea;
  opacity:.9;
}

.field{ margin-top: 12px; }
.field label{
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:space-between;
  font-weight: 900;
  font-size: 13px;
  color:#eaeaea;
  letter-spacing:.2px;
  margin-bottom: 8px;
}
.helper{
  color: rgba(255,255,255,.55);
  font-weight: 700;
  font-size: 12px;
}

.field input,
.field textarea,
.field select{
  width:100%;
  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.40);
  color: #fff;
  outline: none;
  transition: .15s ease;
}
.field input:focus,
.field textarea:focus,
.field select:focus{
  border-color: rgba(255,255,255,.22);
  background: rgba(0,0,0,.52);
}
.field input::placeholder,
.field textarea::placeholder{ color: rgba(255,255,255,.45); }
.field textarea{ min-height: 150px; resize: vertical; }

.error{
  display:none;
  margin-top: 10px;
  padding: 12px 12px;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.06);
  color:#fff;
  font-size: 13px;
  line-height: 1.45;
}
.error.show{ display:block; }

.form-grid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
  margin-top: 12px;
}
.form-grid .full{ grid-column: 1 / -1; }

.radio-row{
  display:flex;
  flex-direction:column;
  gap:10px;
  margin-top: 12px;
}
.radio-item{
  display:flex;
  gap:12px;
  align-items:flex-start;
  padding: 14px 14px;
  border-radius: 18px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
  cursor:pointer;
  transition: .15s ease;
}
.radio-item:hover{
  background: rgba(255,255,255,.06);
  border-color: rgba(255,255,255,.14);
}
.radio-item input{ margin-top: 3px; transform: scale(1.05); }
.radio-item strong{ display:block; font-size: 14px; }
.radio-item span{ display:block; color: var(--muted); font-size: 13px; margin-top: 4px; line-height:1.4; }

.notice{
  margin-top: 12px;
  padding: 14px 14px;
  border-radius: 16px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.35);
  color:#d9d9d9;
  font-size: 13px;
  line-height: 1.5;
}
.notice b{ color:#fff; }

/* UPLOAD PREMIUM */
.file-ui{
  display:flex;
  gap:10px;
  align-items:center;
  width:100%;
  padding: 12px 12px;
  border-radius: 16px;
  border:1px dashed rgba(255,255,255,.18);
  background: rgba(0,0,0,.30);
}
.file-ui strong{ font-size: 13px; }
.file-ui .meta{ min-width: 240px; flex:1; }
.file-ui .meta span{
  display:block;
  color: rgba(255,255,255,.60);
  font-size: 12px;
  margin-top: 4px;
}
.file-ui .name{
  color:#fff;
  font-weight: 900;
  font-size: 13px;
  overflow:hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 62ch;
}
.file-actions{
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
}
.btn-soft{
  padding: 10px 14px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  color:#fff;
  font-weight: 900;
  font-size: 13px;
  cursor:pointer;
  transition: .18s;
}
.btn-soft:hover{ background: rgba(255,255,255,.12); transform: translateY(-1px); }
.btn-danger{ background: rgba(255,255,255,.03); }
.btn-danger:hover{ background: rgba(255,255,255,.10); }
.hidden-file{
  position:absolute;
  left:-9999px;
  width:1px;
  height:1px;
  opacity:0;
}

.form-actions{
  margin-top: 16px;
  display:flex;
  gap: 12px;
  flex-wrap:wrap;
}
.form-actions .btn{
  flex:1;
  min-width: 240px;
}

/* MINI CHECKOUT AP√ìS ENVIO */
.pay-sheet{
  display:none;
  margin-top: 14px;
  padding: 16px 16px;
  border-radius: 18px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.05);
}
.pay-sheet.show{ display:block; }
.pay-sheet h4{
  font-size: 16px;
  margin-bottom: 8px;
}
.pay-sheet p{
  margin:0;
  max-width:none;
  font-size: 14px;
  color: var(--muted);
}
.pay-sheet .row{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top: 12px;
}
.pay-sheet .row a{ flex:1; min-width: 210px; }

/* NOVO: estado p√≥s-envio */
.form-hidden{
  display:none !important;
}
.btn[disabled]{
  opacity:.55;
  cursor:not-allowed;
  transform:none !important;
}

/* =========================
   NOVO: DESTAQUE VISUAL DE ERROS
========================= */
.field.field-error input,
.field.field-error select,
.field.field-error textarea{
  border-color: rgba(255,77,77,.95) !important;
  background: rgba(255,0,0,.10) !important;
  box-shadow: 0 0 0 3px rgba(255,77,77,.18);
}

.section-error{
  border-color: rgba(255,77,77,.65) !important;
  background: rgba(255,0,0,.05) !important;
  box-shadow: 0 0 0 3px rgba(255,77,77,.10);
}

/* um ‚Äúalerta‚Äù sutil no texto do label */
.field.field-error label{
  color: rgba(255,210,210,.98) !important;
}

/* =========================
   ANIMA√á√ïES SUAVES (SCROLL REVEAL)
========================= */
.reveal{
  opacity: 0;
  transform: translateY(18px);
  transition: opacity .7s ease, transform .7s ease;
  will-change: opacity, transform;
}
.reveal.show{ opacity: 1; transform: translateY(0); }

/* =========================
   FOOTER
========================= */
footer{
  padding: 44px 18px;
  text-align:center;
  color:#777;
  background:#050505;
  border-top: 1px solid rgba(255,255,255,.06);
  font-size: 14px;
}

/* =========================
   RESPONSIVO
========================= */
@media(max-width: 980px){
  nav.nav-desktop{display:none}
  .menu-btn{display:flex}
  .header-cta{display:none}
  h2{font-size: 36px}
  .grid{grid-template-columns: 1fr}
  .portfolio-grid{grid-template-columns: 1fr}
  .hero{padding-top: 92px}
  .brand .title{max-width: 55vw}
  .form-grid{grid-template-columns: 1fr}
  .file-ui .name{max-width: 42ch}
}
</style>
</head>

<body>

<header>
  <div class="header-container">
    <div class="brand">
      <img src="logo-timp.png" alt="TIMP" />
      <div class="title">
        TIMP Studio Premium
        <small>‚Ä¢ Atendimento em todo o Brasil ‚Ä¢</small>
      </div>
    </div>

    <nav class="nav-desktop" aria-label="Menu principal">
      <a href="#inicio" class="active">In√≠cio</a>
      <a href="#sobre">Sobre</a>
      <a href="#servicos">Servi√ßos</a>
      <a href="#pacotes">Pacotes</a>
      <a href="#portfolio">Portf√≥lio</a>
      <a href="#depoimentos">Depoimentos</a>
      <a href="#contato">Contato</a>
    </nav>

    <div class="header-cta">
      <a class="btn-mini" href="https://wa.me/5514991856520" target="_blank" rel="noopener">WhatsApp</a>
      <a class="btn-mini" href="#pacotes">Ver pacotes</a>
    </div>

    <button class="menu-btn" id="menuBtn" aria-label="Abrir menu" aria-expanded="false">
      <div class="menu-icon" aria-hidden="true">
        <span></span><span></span><span></span>
      </div>
    </button>
  </div>

  <div class="mobile-panel" id="mobilePanel">
    <div class="inner">
      <a href="#inicio" class="active">In√≠cio</a>
      <a href="#sobre">Sobre</a>
      <a href="#servicos">Servi√ßos</a>
      <a href="#pacotes">Pacotes</a>
      <a href="#portfolio">Portf√≥lio</a>
      <a href="#depoimentos">Depoimentos</a>
      <a href="#contato">Contato</a>

      <div class="cta-row">
        <a href="https://wa.me/5514991856520" target="_blank" rel="noopener">WhatsApp</a>
        <a href="mailto:timpdobrasil@gmail.com">E-mail</a>
      </div>
    </div>
  </div>
</header>

<!-- HERO -->
<section class="hero" id="inicio">
  <img src="logo-timp.png" alt="TIMP Studio Premium">
</section>

<!-- SOBRE -->
<section id="sobre">
  <div class="container reveal">
    <div class="kicker">SOBRE</div>
    <h2>Quem somos</h2>

    <p>
      A TIMP Studio Premium √© um est√∫dio audiovisual especializado em transformar letras em m√∫sicas reais e m√∫sicas em videoclipes profissionais.
      Atrav√©s de tecnologia avan√ßada de IA, conectamos cria√ß√£o musical e produ√ß√£o visual para entregar obras completas, prontas para emocionar e impactar o p√∫blico.
    </p>

    <p>
      Somos movidos pela cria√ß√£o art√≠stica com estrat√©gia.
      Transformamos ideias, sentimentos e palavras em videoclipes e narrativas audiovisuais com identidade forte.
    </p>

    <p>
      Da composi√ß√£o √† produ√ß√£o musical, da grava√ß√£o ao v√≠deo final, entregamos projetos com excel√™ncia est√©tica, clareza criativa e foco em resultado.
    </p>

    <p>
      Tudo pronto para voc√™ divulgar em canais digitais como: YouTube, Instagram, Facebook, WhatsApp, TikTok, etc.
    </p>
  </div>
</section>

<!-- SERVI√áOS -->
<section id="servicos">
  <div class="container reveal">
    <div class="kicker">SERVI√áOS</div>
    <h2>O que fazemos</h2>
    <div class="grid">
      <div class="card">Voc√™ nos envia uma letra de m√∫sica e n√≥s criamos a melodia e o videoclipe.</div>
      <div class="card">Voc√™ compartilha uma hist√≥ria e n√≥s a transformamos em letra de m√∫sica, melodia e videoclipe.</div>
      <div class="card">Criamos do zero, Voc√™ traz apenas uma ideia e n√≥s damos vida a ela, criando letra de m√∫sica, melodia e videoclipe.</div>
    </div>
</section>

<!-- PACOTES / PRE√áOS -->
<section id="pacotes">
  <div class="container reveal">
    <div class="kicker">PACOTES</div>
    <h2>Escolha seu pacote</h2>
    <p>Voc√™ escolhe o n√≠vel de cria√ß√£o ‚Äî n√≥s transformamos em m√∫sica de verdade.</p>

    <div class="grid" style="margin-top:34px;">
      <!-- PACOTE 1 -->
      <div class="card price-card">
        <div class="price-badge">ü•â Pacote 1 ‚Ä¢ Entrada</div>
        <div class="price">R$ 697 <small>J√° tenho a letra ‚Äî quero melodia e base</small></div>
        <div class="features">
          <span>‚Ä¢ Cria√ß√£o de melodia original</span>
          <span>‚Ä¢ Estrutura musical (verso/refr√£o/ponte)</span>
          <span>‚Ä¢ Base instrumental personalizada</span>
          <span>‚Ä¢ sem revis√£o</span>
          <span>‚Ä¢ Entrega MP3 + V√≠deo Clipe</span>
        </div>

        <div class="pay-row">
          <a class="btn select-btn" href="#contato" data-pack="1" data-packname="Pacote 1" data-price="697">Quero esse</a>
        </div>
      </div>

      <!-- PACOTE 2 -->
      <div class="card price-card featured">
        <div class="price-badge">ü•à Pacote 2 ‚Ä¢ Intermedi√°rio</div>
        <div class="price">R$ 997 <small>Tenho a hist√≥ria ‚Äî quero letra + m√∫sica</small></div>
        <div class="features">
          <span>‚Ä¢ Cria√ß√£o da letra personalizada</span>
          <span>‚Ä¢ Melodia original</span>
          <span>‚Ä¢ Produ√ß√£o instrumental completa</span>
          <span>‚Ä¢ 1 revis√£o</span>
          <span>‚Ä¢ Entrega MP3 + V√≠deo Clipe</span>
        </div>

        <div class="pay-row">
          <a class="btn select-btn" href="#contato" data-pack="2" data-packname="Pacote 2" data-price="997">Quero esse</a>
        </div>
      </div>

      <!-- PACOTE 3 -->
      <div class="card price-card">
        <div class="price-badge">ü•á Pacote 3 ‚Ä¢ Completo</div>
        <div class="price">R$ 1.497 <small>Tenho uma ideia ‚Äî quero projeto do zero</small></div>
        <div class="features">
          <span>‚Ä¢ Desenvolvimento do conceito</span>
          <span>‚Ä¢ Letra + melodia + produ√ß√£o musical</span>
          <span>‚Ä¢ Dire√ß√£o art√≠stica</span>
          <span>‚Ä¢ 2 revis√µes</span>
          <span>‚Ä¢ Capa digital (imagem)</span>
          <span>‚Ä¢ Entrega MP3 + V√≠deo Clipe</span>
        </div>

        <div class="pay-row">
          <a class="btn select-btn" href="#contato" data-pack="3" data-packname="Pacote 3" data-price="1497">Quero esse</a>
        </div>
      </div>
    </div>

    <div class="portfolio-cta" style="margin-top:26px;">
      <div></div>
    </div>
</section>

<!-- PORTF√ìLIO COM V√çDEOS REAIS -->
<section id="portfolio">
  <div class="container reveal">
    <div class="kicker">PORTF√ìLIO</div>
    <h2>V√≠deos recentes</h2>
    <p>Alguns exemplos do nosso padr√£o de entrega.</p>

    <div class="portfolio-grid">
      <div class="video-card">
        <div class="video-frame">
          <iframe
            src="https://www.youtube.com/embed/iWxMJYtuuGM"
            title="Institucional ‚Äî TIMP Studio Premium"
            loading="lazy"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen>
          </iframe>
        </div>
        <div class="video-meta">
          <div class="video-title">Institucional</div>
          <div class="video-sub">Apresenta√ß√£o e presen√ßa de marca.</div>
          <div class="video-actions">
            <a class="btn" href="https://www.youtube.com/watch?v=iWxMJYtuuGM" target="_blank" rel="noopener">Assistir</a>
          </div>
        </div>
      </div>

      <div class="video-card">
        <div class="video-frame">
          <iframe
            src="https://www.youtube.com/embed/eiRr98BzZdk"
            title="Comercial ‚Äî TIMP Studio Premium"
            loading="lazy"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen>
          </iframe>
        </div>
        <div class="video-meta">
          <div class="video-title">Letra / M√∫sica / Clipe</div>
          <div class="video-sub">Conte√∫do para convers√£o e impacto.</div>
          <div class="video-actions">
            <a class="btn" href="https://www.youtube.com/watch?v=eiRr98BzZdk" target="_blank" rel="noopener">Assistir</a>
          </div>
        </div>
      </div>

      <div class="video-card">
        <div class="video-frame">
          <iframe
            src="https://www.youtube.com/embed/L0RYguRzFFg"
            title="Reels/Social ‚Äî TIMP Studio Premium"
            loading="lazy"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen>
          </iframe>
        </div>
        <div class="video-meta">
          <div class="video-title">Letra / M√∫sica / Clipe</div>
          <div class="video-sub">Edi√ß√£o din√¢mica e acabamento premium.</div>
          <div class="video-actions">
            <a class="btn" href="https://www.youtube.com/watch?v=L0RYguRzFFg" target="_blank" rel="noopener">Assistir</a>
          </div>
        </div>
      </div>

      <div class="video-card">
        <div class="video-frame">
          <iframe
            src="https://www.youtube.com/embed/oOAuzagI1dg"
            title="Letra / M√∫sica / Clipe ‚Äî TIMP Studio Premium"
            loading="lazy"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen>
          </iframe>
        </div>
        <div class="video-meta">
          <div class="video-title">Letra / M√∫sica / Clipe</div>
          <div class="video-sub">Projeto autoral desenvolvido pela TIMP.</div>
          <div class="video-actions">
            <a class="btn" href="https://www.youtube.com/watch?v=oOAuzagI1dg" target="_blank" rel="noopener">Assistir</a>
          </div>
        </div>
      </div>

      <div class="video-card">
        <div class="video-frame">
          <iframe
            src="https://www.youtube.com/embed/kUphz1lk47Q"
            title="Letra / M√∫sica / Clipe ‚Äî TIMP Studio Premium"
            loading="lazy"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen>
          </iframe>
        </div>
        <div class="video-meta">
          <div class="video-title">Letra / M√∫sica / Clipe</div>
          <div class="video-sub">M√∫sica desenvolvida com identidade pr√≥pria.</div>
          <div class="video-actions">
            <a class="btn" href="https://www.youtube.com/watch?v=kUphz1lk47Q" target="_blank" rel="noopener">Assistir</a>
          </div>
        </div>
      </div>

      <div class="video-card">
        <div class="video-frame">
          <iframe
            src="https://www.youtube.com/embed/p6jQcIeORqE"
            title="Letra / M√∫sica / Clipe ‚Äî TIMP Studio Premium"
            loading="lazy"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen>
          </iframe>
        </div>
        <div class="video-meta">
          <div class="video-title">Letra / M√∫sica / Clipe</div>
          <div class="video-sub">Cria√ß√£o musical e visual integradas.</div>
          <div class="video-actions">
            <a class="btn" href="https://www.youtube.com/watch?v=p6jQcIeORqE" target="_blank" rel="noopener">Assistir</a>
          </div>
        </div>
      </div>

      <div class="video-card">
        <div class="video-frame">
          <iframe
            src="https://www.youtube.com/embed/fIcl7pr-kxw"
            title="Letra / M√∫sica / Clipe ‚Äî TIMP Studio Premium"
            loading="lazy"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen>
          </iframe>
        </div>
        <div class="video-meta">
          <div class="video-title">Letra / M√∫sica / Clipe</div>
          <div class="video-sub">Desenvolvimento criativo completo.</div>
          <div class="video-actions">
            <a class="btn" href="https://www.youtube.com/watch?v=fIcl7pr-kxw" target="_blank" rel="noopener">Assistir</a>
          </div>
        </div>
      </div>

      <div class="video-card">
        <div class="video-frame">
          <iframe
            src="https://www.youtube.com/embed/DG2ip-o5Yno"
            title="Letra / M√∫sica / Clipe ‚Äî TIMP Studio Premium"
            loading="lazy"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen>
          </iframe>
        </div>
        <div class="video-meta">
          <div class="video-title">Letra / M√∫sica / Clipe</div>
          <div class="video-sub">Produ√ß√£o profissional com identidade sonora.</div>
          <div class="video-actions">
            <a class="btn" href="https://www.youtube.com/watch?v=DG2ip-o5Yno" target="_blank" rel="noopener">Assistir</a>
          </div>
        </div>
      </div>

      <div class="video-card">
        <div class="video-frame">
          <iframe
            src="https://www.youtube.com/embed/eCNHUnNrHxY"
            title="Letra / M√∫sica / Clipe ‚Äî TIMP Studio Premium"
            loading="lazy"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen>
          </iframe>
        </div>
        <div class="video-meta">
          <div class="video-title">Letra / M√∫sica / Clipe</div>
          <div class="video-sub">Integra√ß√£o entre m√∫sica e imagem.</div>
          <div class="video-actions">
            <a class="btn" href="https://www.youtube.com/watch?v=eCNHUnNrHxY" target="_blank" rel="noopener">Assistir</a>
          </div>
        </div>
      </div>

      <div class="video-card">
        <div class="video-frame">
          <iframe
            src="https://www.youtube.com/embed/o49Oo8HIR_8"
            title="Letra / M√∫sica / Clipe ‚Äî TIMP Studio Premium"
            loading="lazy"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen>
          </iframe>
        </div>
        <div class="video-meta">
          <div class="video-title">Letra / M√∫sica / Clipe</div>
          <div class="video-sub">Produ√ß√£o musical personalizada.</div>
          <div class="video-actions">
            <a class="btn" href="https://www.youtube.com/watch?v=o49Oo8HIR_8" target="_blank" rel="noopener">Assistir</a>
          </div>
        </div>
      </div>

      <div class="video-card">
        <div class="video-frame">
          <iframe
            src="https://www.youtube.com/embed/NIaHr8Ui4K0"
            title="Letra / M√∫sica / Clipe ‚Äî TIMP Studio Premium"
            loading="lazy"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen>
          </iframe>
        </div>
        <div class="video-meta">
          <div class="video-title">Letra / M√∫sica / Clipe</div>
          <div class="video-sub">Da letra ao videoclipe final.</div>
          <div class="video-actions">
            <a class="btn" href="https://www.youtube.com/watch?v=NIaHr8Ui4K0" target="_blank" rel="noopener">Assistir</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- DEPOIMENTOS -->
<section id="depoimentos">
  <div class="container reveal">
    <div class="kicker">DEPOIMENTOS</div>
    <h2>O que falam</h2>
    <div class="grid">
      <div class="card">‚ÄúFui Muito bem atendido, visual impec√°vel e atendimento r√°pido.‚ÄùCarlos Braga-SP</div>
      <div class="card">‚ÄúA Produ√ß√£o foi premium do in√≠cio ao fim.‚Äù Simone K. Silva-ES</d iv>
      <div class="card">‚ÄúExperi√™ncia profissional acima da m√©dia.‚Äù Maria Apa Cardoso-SP</div>
      <div class="card">‚ÄúParabens aos idealizadores, fiquei encantada.‚Äù Ana Castela-SP</div>
    </div>
  </div>
</section>

<!-- CONTATO + FORMUL√ÅRIO -->
<section id="contato">
  <div class="container reveal">
    <div class="kicker">CONTATO</div>
    <h2>Come√ßar meu projeto</h2>

    <p class="small-muted">
      Preencha os dados abaixo. Se voc√™ clicou em um pacote acima, ele j√° fica selecionado aqui.
      <br>WhatsApp: (14) 99185-6520 ‚Ä¢ E-mail: timpdobrasil@gmail.com ‚Ä¢ Bauru - SP
    </p>

    <!-- NOVO: status do pagamento (Mercado Pago retorna aqui com querystring) -->
    <div class="notice" id="paymentStatus" style="display:none; margin-top:14px;">
      <b>Status:</b> <span id="paymentStatusText">‚Äî</span>
    </div>

    <div class="form-wrap" id="formWrap">
      <form id="timpForm" action="#" method="post" enctype="multipart/form-data" novalidate>

        <div class="form-topbar">
          <div>
            <strong>Envio do projeto (r√°pido e guiado)</strong>
            <span>Escolha um pacote, diga o que voc√™ j√° tem e envie seu conte√∫do. Depois, voc√™ ser√° direcionado para o pagamento via Mercado Pago.</span>
          </div>
          <div class="steps" aria-label="Etapas do formul√°rio">
            <div class="step active" id="s1"><span class="dot"></span>1) Pacote</div>
            <div class="step" id="s2"><span class="dot"></span>2) Voc√™ j√° tem</div>
            <div class="step" id="s3"><span class="dot"></span>3) Conte√∫do</div>
            <div class="step" id="s4"><span class="dot"></span>4) Seus dados</div>
          </div>
        </div>

        <div class="error" id="formError">
          <b>Faltou algo:</b> revise os campos destacados e tente novamente.
        </div>

        <!-- 1) PACOTE -->
        <div class="form-section" id="secPacote">
          <h3 class="req">1) Pacote escolhido</h3>
          <p>Selecione o pacote para direcionarmos a cria√ß√£o corretamente.</p>

          <div class="notice" id="packSummary" style="margin-top:12px;">
            <b>Selecione um pacote</b> acima para preencher automaticamente aqui.
          </div>

          <div class="field">
            <label for="pacote">
              Pacote
              <span class="helper">Escolha 1 op√ß√£o</span>
            </label>
            <select id="pacote" name="pacote" required>
              <option value="" selected disabled>Selecione um pacote</option>
              <option value="Pacote 1 - R$ 697">Pacote 1 ‚Äî R$ 697 (J√° tenho a letra)</option>
              <option value="Pacote 2 - R$ 997">Pacote 2 ‚Äî R$ 997 (Tenho a hist√≥ria)</option>
              <option value="Pacote 3 - R$ 1.497">Pacote 3 ‚Äî R$ 1.497 (Tenho uma ideia)</option>
            </select>
          </div>
        </div>

        <!-- 2) ORIGEM -->
        <div class="form-section" id="secOrigem">
          <h3 class="req">2) O que voc√™ j√° tem?</h3>
          <p>Isso ajuda a TIMP a come√ßar do ponto certo e acelerar a entrega.</p>

          <div class="radio-row">
            <label class="radio-item">
              <input type="radio" name="origem" value="1) J√° tenho a letra, mas ainda n√£o tenho a melodia" required>
              <div>
                <strong>1) J√° tenho a letra, mas ainda n√£o tenho a melodia</strong>
                <span>Voc√™ manda a letra e n√≥s criamos a melodia + base.</span>
              </div>
            </label>

            <label class="radio-item">
              <input type="radio" name="origem" value="2) Tenho uma hist√≥ria e quero transform√°-la em letra musical" required>
              <div>
                <strong>2) Tenho uma hist√≥ria e quero transformar em letra musical</strong>
                <span>Voc√™ manda a hist√≥ria e n√≥s viramos letra + m√∫sica.</span>
              </div>
            </label>

            <label class="radio-item">
              <input type="radio" name="origem" value="3) N√£o tenho hist√≥ria nem letra, mas tenho uma ideia" required>
              <div>
                <strong>3) N√£o tenho hist√≥ria nem letra, mas tenho uma ideia</strong>
                <span>Voc√™ manda a ideia e n√≥s criamos tudo do zero.</span>
              </div>
            </label>
          </div>
        </div>

        <!-- 3) CONTE√öDO -->
        <div class="form-section" id="secConteudo">
          <h3 class="req">3) Seu conte√∫do (texto ou arquivo)</h3>
          <p>Voc√™ pode <b>colar o texto</b> ou <b>anexar um arquivo</b>. Pelo menos 1 √© obrigat√≥rio.</p>

          <div class="field" id="fieldTexto">
            <label for="texto">
              Cole aqui sua letra / hist√≥ria / ideia
              <span class="helper">Ou envie um arquivo abaixo</span>
            </label>
            <textarea id="texto" name="texto" placeholder="Cole aqui sua letra, hist√≥ria ou ideia..."></textarea>
            <div class="small-muted" style="margin-top:8px;">
              Dica: se tiver partes importantes (refr√£o, emo√ß√£o, hist√≥ria), deixe bem claro.
            </div>
          </div>

          <div class="field">
            <label>
              Anexar arquivo com letra/hist√≥ria/ideia
              <span class="helper">PDF, DOC/DOCX ou TXT</span>
            </label>

            <input class="hidden-file" id="arquivo" name="arquivo" type="file" accept=".doc,.docx,.pdf,.txt">

            <div class="file-ui" id="arquivoUI">
              <div class="meta">
                <div class="name" id="arquivoName">Nenhum arquivo selecionado</div>
                <span>Se voc√™ escolher um arquivo errado, clique em <b>Remover</b> e selecione outro.</span>
              </div>

              <div class="file-actions">
                <button type="button" class="btn-soft" id="arquivoPick">Escolher arquivo</button>
                <button type="button" class="btn-soft btn-danger" id="arquivoClear" disabled>Remover</button>
              </div>
            </div>
          </div>

          <div class="field">
            <label>
              Anexar imagem (opcional)
              <span class="helper">Refer√™ncia / capa / inspira√ß√£o</span>
            </label>

            <input class="hidden-file" id="imagem" name="imagem" type="file" accept="image/*">

            <div class="file-ui" id="imagemUI" style="border-style: solid; border-color: rgba(255,255,255,.12);">
              <div class="meta">
                <div class="name" id="imagemName">Nenhuma imagem selecionada</div>
                <span>Opcional. Se anexar, facilita na dire√ß√£o visual do clipe/capa.</span>
              </div>

              <div class="file-actions">
                <button type="button" class="btn-soft" id="imagemPick">Escolher imagem</button>
                <button type="button" class="btn-soft btn-danger" id="imagemClear" disabled>Remover</button>
              </div>
            </div>
          </div>

          <div class="notice" id="contentNotice">
            <b>Aten√ß√£o:</b> para enviar, voc√™ precisa <b>colar o texto</b> (letra/hist√≥ria/ideia) <b>ou anexar o arquivo</b>. Pode fazer os dois tamb√©m.
          </div>
        </div>

        <!-- 4) DADOS -->
        <div class="form-section" id="secDados">
          <h3 class="req">4) Seus dados</h3>
          <p>Precisamos destes dados para confirmar o pedido e organizar a produ√ß√£o.</p>

          <div class="form-grid">
            <div class="field">
              <label for="nome">Nome completo <span class="helper">Obrigat√≥rio</span></label>
              <input id="nome" name="nome" type="text" placeholder="Seu nome completo" required>
            </div>

            <div class="field">
              <label for="nascimento">Data de nascimento <span class="helper">Obrigat√≥rio</span></label>
              <input id="nascimento" name="nascimento" type="date" required>
            </div>

            <div class="field full">
              <label for="endereco">Endere√ßo <span class="helper">Obrigat√≥rio</span></label>
              <input id="endereco" name="endereco" type="text" placeholder="Rua, n√∫mero, bairro, complemento" required>
            </div>

            <div class="field">
              <label for="cidade">Cidade <span class="helper">Obrigat√≥rio</span></label>
              <input id="cidade" name="cidade" type="text" placeholder="Cidade" required>
            </div>

            <div class="field">
              <label for="estado">Estado <span class="helper">Obrigat√≥rio</span></label>
              <input id="estado" name="estado" type="text" placeholder="Ex: SP" required>
            </div>

            <div class="field">
              <label for="cep">CEP <span class="helper">Obrigat√≥rio</span></label>
              <input id="cep" name="cep" type="text" placeholder="00000-000" required>
            </div>

            <div class="field">
              <label for="whats">Telefone / WhatsApp <span class="helper">Obrigat√≥rio</span></label>
              <input id="whats" name="whats" type="tel" placeholder="(00) 00000-0000" required>
            </div>

            <!-- NOVO: e-mail do cliente (para confirma√ß√£o autom√°tica) -->
            <div class="field full">
              <label for="email">E-mail <span class="helper">Obrigat√≥rio</span></label>
              <input id="email" name="email" type="email" placeholder="email@exemplo.com" required>
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn" id="btnSend">Enviar e ir para o pagamento</button>
          </div>

          <!-- MINI CHECKOUT (fallback se backend falhar) -->
          <div class="pay-sheet" id="paySheet">
            <h4>Pronto ‚úÖ Agora finalize o pagamento</h4>
            <p>Se o redirecionamento autom√°tico falhar, use os bot√µes abaixo.</p>
            <div class="row">
              <a class="btn" href="#" id="payNowBtn" target="_blank" rel="noopener">Pagar agora (Mercado Pago)</a>
              <a class="btn btn-outline" href="#" id="whatsConfirmBtn" target="_blank" rel="noopener">Falar no WhatsApp</a>
            </div>
          </div>

          <p class="small-muted" style="margin-top:12px;">
            *Ap√≥s o pagamento confirmado, voc√™ e a TIMP receber√£o confirma√ß√£o por e-mail/WhatsApp (quando o webhook estiver configurado).
          </p>
        </div>

      </form>
    </div>

    <div class="buttons">
      <a class="btn" href="https://wa.me/5514991856520" target="_blank" rel="noopener">WhatsApp</a>
      <a class="btn" href="mailto:timpdobrasil@gmail.com">Enviar e-mail</a>
    </div>
  </div>
</section>

<footer>
  ¬© TIMP Studio Premium ‚Äî Todos os direitos reservados
</footer>

<script>
(function(){
  /**
   * =========================
   * CONFIG (VOC√ä VAI EDITAR ISSO)
   * =========================
   * Este site √© est√°tico. Para ter:
   * - registro do pedido
   * - redirecionamento autom√°tico para Mercado Pago
   * - confirma√ß√£o autom√°tica (webhook) + e-mail + WhatsApp
   * voc√™ precisa de um endpoint (back-end).
   *
   * Coloque aqui a URL do seu back-end publicado (Cloudflare Worker / Vercel / etc).
   */
  const API_BASE = "COLE_AQUI_SUA_API_BASE"; // ex: https://timp-pay.yourdomain.workers.dev

  // fallback: seus links mpago.li (caso o backend falhe)
  const MP_LINKS = {
    1: "https://mpago.li/2DrujAy",
    2: "https://mpago.li/2za2eDc",
    3: "https://mpago.li/1gm7Bhc"
  };

  const WHATS_NUMBER = "5514991856520";
  const OWNER_EMAIL = "timpdobrasil@gmail.com";

  function hasApi(){
    return typeof API_BASE === "string" && API_BASE.startsWith("http");
  }

  function isValidMpLink(url){
    return typeof url === "string"
      && url.startsWith("http");
  }
  function getMpLinkByPack(pack){
    const p = Number(pack);
    const link = MP_LINKS[p];
    return isValidMpLink(link) ? link : "";
  }

  // ===== MENU MOBILE =====
  const menuBtn = document.getElementById('menuBtn');
  const panel = document.getElementById('mobilePanel');
  const desktopLinks = Array.from(document.querySelectorAll('nav.nav-desktop a'));
  const mobileLinks  = Array.from(panel.querySelectorAll('.inner > a'));

  function setActive(hash){
    const all = desktopLinks.concat(mobileLinks);
    all.forEach(a => a.classList.toggle('active', a.getAttribute('href') === hash));
  }

  function closeMenu(){
    panel.style.display = 'none';
    menuBtn.setAttribute('aria-expanded','false');
    menuBtn.setAttribute('aria-label','Abrir menu');
  }

  function toggleMenu(){
    const open = panel.style.display === 'block';
    if(open) closeMenu();
    else{
      panel.style.display = 'block';
      menuBtn.setAttribute('aria-expanded','true');
      menuBtn.setAttribute('aria-label','Fechar menu');
    }
  }

  menuBtn.addEventListener('click', toggleMenu);
  mobileLinks.forEach(a=>{
    a.addEventListener('click', ()=>{
      setActive(a.getAttribute('href'));
      closeMenu();
    });
  });
  desktopLinks.forEach(a=>{
    a.addEventListener('click', ()=> setActive(a.getAttribute('href')));
  });
  window.addEventListener('scroll', ()=>{
    if(panel.style.display === 'block') closeMenu();
  }, {passive:true});
  window.addEventListener('resize', ()=>{
    if(window.innerWidth > 980) closeMenu();
  });

  if(location.hash){ setActive(location.hash); }

  // ===== ANIMA√á√ïES SUAVES (SCROLL REVEAL) =====
  const items = document.querySelectorAll('.reveal');
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      if(e.isIntersecting){
        e.target.classList.add('show');
        io.unobserve(e.target);
      }
    });
  }, {threshold: 0.12});
  items.forEach(el=> io.observe(el));

  // ===== ATIVO NO MENU PELO SCROLL =====
  const sectionIds = ['inicio','sobre','servicos','pacotes','portfolio','depoimentos','contato'];
  const sections = sectionIds.map(id => document.getElementById(id)).filter(Boolean);

  const navIO = new IntersectionObserver((entries)=>{
    const visible = entries
      .filter(e => e.isIntersecting)
      .sort((a,b)=> b.intersectionRatio - a.intersectionRatio)[0];

    if(visible && visible.target && visible.target.id){
      setActive('#' + visible.target.id);
    }
  }, {threshold: [0.25, 0.35, 0.5, 0.65]});

  sections.forEach(s => navIO.observe(s));

  // ===== PACOTES -> FORMUL√ÅRIO =====
  const packSummary = document.getElementById('packSummary');
  const packSelect  = document.getElementById('pacote');
  const btns = Array.from(document.querySelectorAll('[data-pack]'));

  function formatBRL(value){
    const n = Number(value || 0);
    return n.toLocaleString('pt-BR', {minimumFractionDigits: 0});
  }
  function updateSummary(html){
    packSummary.innerHTML = html;
  }

  btns.forEach(b=>{
    b.addEventListener('click', ()=>{
      const pack = b.getAttribute('data-pack');
      const name = b.getAttribute('data-packname');
      const price = b.getAttribute('data-price');

      if(pack === "1") packSelect.value = "Pacote 1 - R$ 697";
      if(pack === "2") packSelect.value = "Pacote 2 - R$ 997";
      if(pack === "3") packSelect.value = "Pacote 3 - R$ 1.497";

      updateSummary(`<b>${name} selecionado</b> ‚Äî Valor: <b>R$ ${formatBRL(price)}</b>. Agora complete as etapas abaixo e envie seu pedido.`);
      updateSteps();
    });
  });

  // ===== UPLOAD UI (arquivo + remover) =====
  const arquivoInput = document.getElementById('arquivo');
  const arquivoPick  = document.getElementById('arquivoPick');
  const arquivoClear = document.getElementById('arquivoClear');
  const arquivoName  = document.getElementById('arquivoName');

  const imagemInput = document.getElementById('imagem');
  const imagemPick  = document.getElementById('imagemPick');
  const imagemClear = document.getElementById('imagemClear');
  const imagemName  = document.getElementById('imagemName');

  function setFileState(input, nameEl, clearBtn, emptyText){
    const has = input.files && input.files.length > 0;
    if(has){
      nameEl.textContent = input.files[0].name;
      clearBtn.disabled = false;
    }else{
      nameEl.textContent = emptyText;
      clearBtn.disabled = true;
    }
    updateSteps();
  }

  arquivoPick.addEventListener('click', ()=> arquivoInput.click());
  arquivoInput.addEventListener('change', ()=> setFileState(arquivoInput, arquivoName, arquivoClear, 'Nenhum arquivo selecionado'));
  arquivoClear.addEventListener('click', ()=>{
    arquivoInput.value = '';
    setFileState(arquivoInput, arquivoName, arquivoClear, 'Nenhum arquivo selecionado');
  });

  imagemPick.addEventListener('click', ()=> imagemInput.click());
  imagemInput.addEventListener('change', ()=> setFileState(imagemInput, imagemName, imagemClear, 'Nenhuma imagem selecionada'));
  imagemClear.addEventListener('click', ()=>{
    imagemInput.value = '';
    setFileState(imagemInput, imagemName, imagemClear, 'Nenhuma imagem selecionada');
  });

  // ===== ETAPAS (visual) =====
  const s1 = document.getElementById('s1');
  const s2 = document.getElementById('s2');
  const s3 = document.getElementById('s3');
  const s4 = document.getElementById('s4');

  const form = document.getElementById('timpForm');
  const texto = document.getElementById('texto');
  const formError = document.getElementById('formError');

  const paySheet = document.getElementById('paySheet');
  const payNowBtn = document.getElementById('payNowBtn');
  const whatsConfirmBtn = document.getElementById('whatsConfirmBtn');
  const btnSend = document.getElementById('btnSend');

  const secPacote = document.getElementById('secPacote');
  const secOrigem = document.getElementById('secOrigem');
  const secConteudo = document.getElementById('secConteudo');
  const secDados = document.getElementById('secDados');
  const fieldTexto = document.getElementById('fieldTexto');

  function hasOrigem(){
    return !!form.querySelector('input[name="origem"]:checked');
  }
  function hasDadosMin(){
    const nome = (document.getElementById('nome').value || '').trim().length > 0;
    const nasc = (document.getElementById('nascimento').value || '').trim().length > 0;
    const end  = (document.getElementById('endereco').value || '').trim().length > 0;
    const cid  = (document.getElementById('cidade').value || '').trim().length > 0;
    const est  = (document.getElementById('estado').value || '').trim().length > 0;
    const cep  = (document.getElementById('cep').value || '').trim().length > 0;
    const wha  = (document.getElementById('whats').value || '').trim().length > 0;
    const eml  = (document.getElementById('email').value || '').trim().length > 0;
    return nome && nasc && end && cid && est && cep && wha && eml;
  }

  function updateSteps(){
    const ok1 = !!packSelect.value;
    s1.classList.toggle('done', ok1);
    s1.classList.toggle('active', !ok1);

    const ok2 = hasOrigem();
    s2.classList.toggle('done', ok2);
    s2.classList.toggle('active', ok1 && !ok2);

    const hasText = (texto.value || "").trim().length > 0;
    const hasFile = (arquivoInput.files && arquivoInput.files.length > 0);
    const ok3 = hasText || hasFile;
    s3.classList.toggle('done', ok3);
    s3.classList.toggle('active', ok1 && ok2 && !ok3);

    const ok4 = hasDadosMin();
    s4.classList.toggle('done', ok4);
    s4.classList.toggle('active', ok1 && ok2 && ok3 && !ok4);
  }

  ['change','keyup','blur'].forEach(evt=>{
    form.addEventListener(evt, updateSteps, true);
  });
  updateSteps();

  // ===== NOVO: helpers de erro (destacar + ir direto) =====
  function clearErrors(){
    formError.classList.remove('show');
    form.querySelectorAll('.field-error').forEach(el => el.classList.remove('field-error'));
    [secPacote, secOrigem, secConteudo, secDados].forEach(sec => sec.classList.remove('section-error'));
  }
  function markFieldError(inputEl){
    if(!inputEl) return;
    const field = inputEl.closest('.field');
    if(field) field.classList.add('field-error');
  }
  function scrollToEl(el){
    if(!el) return;
    el.scrollIntoView({behavior:"smooth", block:"center"});
    setTimeout(()=>{
      try{ el.focus({preventScroll:true}); }catch(e){}
    }, 250);
  }

  form.addEventListener('input', (e)=>{
    const t = e.target;
    const field = t && t.closest && t.closest('.field');
    if(field && field.classList.contains('field-error')){
      field.classList.remove('field-error');
    }
    if(t && t.name === 'origem'){
      secOrigem.classList.remove('section-error');
    }
  }, true);

  form.addEventListener('change', (e)=>{
    const t = e.target;
    if(t && t.id === 'pacote'){
      secPacote.classList.remove('section-error');
      const f = t.closest('.field'); if(f) f.classList.remove('field-error');
    }
    if(t && (t.id === 'arquivo' || t.id === 'texto')){
      secConteudo.classList.remove('section-error');
      if(fieldTexto) fieldTexto.classList.remove('field-error');
    }
  }, true);

  // ===== NOVO: status do pagamento via querystring =====
  const paymentStatus = document.getElementById('paymentStatus');
  const paymentStatusText = document.getElementById('paymentStatusText');

  function parseQS(){
    const p = new URLSearchParams(location.search || "");
    const obj = {};
    p.forEach((v,k)=> obj[k] = v);
    return obj;
  }

  function showPaymentStatus(){
    const qs = parseQS();

    // Mercado Pago pode voltar com status/collection_status etc dependendo do modo
    const status =
      qs.status ||
      qs.collection_status ||
      qs.payment_status ||
      "";

    if(!status) return;

    let txt = status;

    // mensagens amig√°veis
    const s = String(status).toLowerCase();
    if(s.includes("approved") || s.includes("aprovado")){
      txt = "Pagamento aprovado ‚úÖ Voc√™ receber√° a confirma√ß√£o por e-mail/WhatsApp.";
    }else if(s.includes("pending") || s.includes("in_process")){
      txt = "Pagamento pendente ‚è≥ Assim que confirmar, voc√™ receber√° a confirma√ß√£o.";
    }else if(s.includes("rejected") || s.includes("cancelled") || s.includes("failure") || s.includes("failed")){
      txt = "Pagamento n√£o conclu√≠do ‚ùå Voc√™ pode tentar novamente ou falar com a TIMP no WhatsApp.";
    }

    paymentStatusText.textContent = txt;
    paymentStatus.style.display = "block";

    // se pagou, j√° leva a pessoa pra se√ß√£o de contato
    if(location.hash !== "#contato"){
      location.hash = "#contato";
    }
  }
  showPaymentStatus();

  // ===== SUBMIT: ENVIA PRO BACKEND E REDIRECIONA PRO CHECKOUT MP =====
  function packNumFromSelect(val){
    if(!val) return 0;
    if(val.includes("Pacote 1")) return 1;
    if(val.includes("Pacote 2")) return 2;
    if(val.includes("Pacote 3")) return 3;
    return 0;
  }

  function buildWhatsMsg(payload){
    return `Ol√° TIMP! Quero iniciar meu projeto.
‚Ä¢ Pacote: ${payload.pacote}
‚Ä¢ Eu j√° tenho: ${payload.origem}
‚Ä¢ Nome: ${payload.nome}
‚Ä¢ Cidade/UF: ${payload.cidade}/${payload.estado}

Acabei de enviar os dados pelo site. Podemos confirmar os detalhes?`;
  }

  async function createCheckout(payload){
    // endpoint esperado:
    // POST {API_BASE}/api/checkout
    // body json payload
    // resposta: { checkoutUrl, orderId }
    const url = API_BASE.replace(/\/+$/,'') + "/api/checkout";
    const res = await fetch(url, {
      method: "POST",
      headers: {"Content-Type":"application/json"},
      body: JSON.stringify(payload)
    });
    if(!res.ok){
      const t = await res.text().catch(()=> "");
      throw new Error("Falha ao criar checkout. " + t);
    }
    const data = await res.json();
    return data;
  }

  form.addEventListener('submit', async (e)=>{
    clearErrors();

    if(!packSelect.value){
      e.preventDefault();
      formError.classList.add('show');
      secPacote.classList.add('section-error');
      markFieldError(packSelect);
      scrollToEl(packSelect);
      return;
    }

    if(!hasOrigem()){
      e.preventDefault();
      formError.classList.add('show');
      secOrigem.classList.add('section-error');
      const firstRadio = form.querySelector('input[name="origem"]');
      scrollToEl(firstRadio || secOrigem);
      return;
    }

    const hasText = (texto.value || "").trim().length > 0;
    const hasFile = (arquivoInput.files && arquivoInput.files.length > 0);
    if(!hasText && !hasFile){
      e.preventDefault();
      formError.classList.add('show');
      secConteudo.classList.add('section-error');
      if(fieldTexto) fieldTexto.classList.add('field-error');
      scrollToEl(texto);
      return;
    }

    const requiredFields = Array.from(form.querySelectorAll('[required]'));
    let firstMissing = null;

    requiredFields.forEach(el=>{
      if(el.type === 'radio') return;
      if(!el.value){
        if(!firstMissing) firstMissing = el;
        markFieldError(el);
      }
    });

    if(firstMissing){
      e.preventDefault();
      formError.classList.add('show');
      secDados.classList.add('section-error');
      scrollToEl(firstMissing);
      return;
    }

    e.preventDefault();

    // trava bot√£o
    btnSend.disabled = true;
    btnSend.textContent = "Enviando‚Ä¶";

    const origem = (form.querySelector('input[name="origem"]:checked') || {}).value || '';
    const packNum = packNumFromSelect(packSelect.value);

    const payload = {
      pacote: packSelect.value,
      pacote_num: packNum,
      origem,
      texto: (texto.value || "").trim(),
      // arquivos/imagem: em site est√°tico, enviar arquivo direto exige backend com upload.
      // por enquanto vamos enviar s√≥ os nomes (o backend pode instruir o cliente depois).
      arquivo_nome: (arquivoInput.files && arquivoInput.files[0]) ? arquivoInput.files[0].name : "",
      imagem_nome: (imagemInput.files && imagemInput.files[0]) ? imagemInput.files[0].name : "",
      nome: (document.getElementById('nome').value || '').trim(),
      nascimento: (document.getElementById('nascimento').value || '').trim(),
      endereco: (document.getElementById('endereco').value || '').trim(),
      cidade: (document.getElementById('cidade').value || '').trim(),
      estado: (document.getElementById('estado').value || '').trim(),
      cep: (document.getElementById('cep').value || '').trim(),
      whats: (document.getElementById('whats').value || '').trim(),
      email: (document.getElementById('email').value || '').trim(),
      owner_email: OWNER_EMAIL,
      return_url: location.origin + location.pathname + "#contato"
    };

    // monta WhatsApp
    const waMsg = buildWhatsMsg(payload);
    const waUrl = "https://wa.me/" + WHATS_NUMBER + "?text=" + encodeURIComponent(waMsg);
    whatsConfirmBtn.href = waUrl;

    // fallback MP direto (se backend n√£o estiver pronto)
    const payLinkFallback = getMpLinkByPack(packNum) || waUrl;
    payNowBtn.href = payLinkFallback;

    try{
      if(!hasApi()){
        // backend ainda n√£o configurado: mostra fallback
        btnSend.textContent = "Pedido enviado ‚úÖ";
        paySheet.classList.add('show');
        paySheet.scrollIntoView({behavior:"smooth", block:"center"});
        return;
      }

      // cria checkout no backend e redireciona
      btnSend.textContent = "Redirecionando pro pagamento‚Ä¶";
      const data = await createCheckout(payload);

      if(data && data.checkoutUrl){
        // redireciona
        window.location.href = data.checkoutUrl;
        return;
      }

      throw new Error("Backend n√£o retornou checkoutUrl.");
    }catch(err){
      console.error(err);
      btnSend.textContent = "Pedido enviado ‚úÖ";
      paySheet.classList.add('show');

      // mostra aviso que backend falhou
      paymentStatusText.textContent = "N√£o foi poss√≠vel redirecionar automaticamente. Use os bot√µes abaixo para pagar e/ou falar no WhatsApp.";
      paymentStatus.style.display = "block";

      paySheet.scrollIntoView({behavior:"smooth", block:"center"});
    }finally{
      // mant√©m disabled pra evitar duplicar pedido; se quiser liberar, descomente:
      // btnSend.disabled = false;
    }
  });

})();
</script>

</body>
</html>
